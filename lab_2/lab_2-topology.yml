#  Run this script to launch the 7 node ltrspg-2212 topology
#

name: ltrspg-2212

mgmt:
  network: mgt_net
  ipv4-subnet: 10.254.254.0/24

topology:
  nodes:

    xrd01:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.8.1
      mgmt-ipv4: 10.254.254.101
      startup-config: config/xrd01.cfg

    xrd02:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.8.1
      mgmt-ipv4: 10.254.254.102
      startup-config: config/xrd02.cfg

    xrd03:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.8.1
      mgmt-ipv4: 10.254.254.103
      startup-config: config/xrd03.cfg

    xrd04:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.8.1
      mgmt-ipv4: 10.254.254.104
      startup-config: config/xrd04.cfg

    xrd05:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.8.1
      mgmt-ipv4: 10.254.254.105
      startup-config: config/xrd05.cfg

    xrd06:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.8.1
      mgmt-ipv4: 10.254.254.106
      startup-config: config/xrd06.cfg

    xrd07:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.8.1
      mgmt-ipv4: 10.254.254.107
      startup-config: config/xrd07.cfg

  # macvlan notes 
    # xrd-VM ens224: xrd01 gi0/0/0/0 -> Amsterdam VPP
    # xrd-VM ens256: xrd07 gi0/0/0/0 -> Rome ens192
    # xrd-VM ens161: xrd07 gi0/0/0/3 -> Rome ens224
    # xrd-VM ens193: xrd01 gi0/0/0/3 -> Amsterdam ens224

  links:
    - endpoints: ["xrd01:Gi0-0-0-0", "macvlan:ens224"]
    - endpoints: ["xrd01:Gi0-0-0-1", "xrd02:Gi0-0-0-0"]
    - endpoints: ["xrd01:Gi0-0-0-2", "xrd05:Gi0-0-0-0"]
    - endpoints: ["xrd01:Gi0-0-0-3", "macvlan:ens193"]

    - endpoints: ["xrd02:Gi0-0-0-1", "xrd03:Gi0-0-0-0"]
    - endpoints: ["xrd02:Gi0-0-0-2", "xrd06:Gi0-0-0-1"]

    - endpoints: ["xrd03:Gi0-0-0-1", "xrd04:Gi0-0-0-0"]

    - endpoints: ["xrd04:Gi0-0-0-1", "xrd07:Gi0-0-0-1"]
    - endpoints: ["xrd04:Gi0-0-0-2", "xrd05:Gi0-0-0-1"]

    - endpoints: ["xrd05:Gi0-0-0-2", "xrd06:Gi0-0-0-2"]
    - endpoints: ["xrd06:Gi0-0-0-0", "xrd07:Gi0-0-0-2"]

    - endpoints: ["xrd07:Gi0-0-0-0", "macvlan:ens256"]
    - endpoints: ["xrd07:Gi0-0-0-3", "macvlan:ens161"]